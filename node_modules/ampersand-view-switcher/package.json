{
  "name": "ampersand-view-switcher",
  "description": "A utility for swapping out views inside a container element.",
  "version": "1.0.2",
  "author": {
    "name": "Henrik Joreteg",
    "email": "henrik@andyet.net"
  },
  "bugs": {
    "url": "https://github.com/ampersandjs/ampersand-view-switcher/issues"
  },
  "dependencies": {
    "ampersand-view": "~4.2.1"
  },
  "devDependencies": {
    "ampersand-view": "^4.2.1",
    "precommit-hook": "0.x.x",
    "run-browser": "",
    "tap-spec": "^0.2.0",
    "tape": "2.x.x",
    "tape-run": "^0.1.1"
  },
  "homepage": "https://github.com/ampersandjs/ampersand-view-switcher",
  "keywords": [
    "ampersand",
    "views",
    "backbone",
    "clientside"
  ],
  "license": "MIT",
  "main": "ampersand-view-switcher.js",
  "repository": {
    "type": "git",
    "url": "git://github.com/ampersandjs/ampersand-view-switcher"
  },
  "scripts": {
    "start": "run-browser test/*",
    "test": "browserify test/* | tape-run | tap-spec"
  },
  "readme": "# ampersand-view-switcher\n\nThis module does one thing: *it helps you swap out views inside of an element*. It's compatible with ampersand-view, backbone views and any view that has an `.el`, `.render` and `.remove()`\n\nWhat might you do with it?\n- build a page container for your app.\n- build a system for managing display of modals in your single page app.\n- animate a transition between showing any two views.\n\nWhat it does\n- Takes an instantiated view and renders it in the container.\n- Removes the existing view from the container and calls `remove` on it.\n- Makes it easy to do custom stuff as views are added and removed.\n- Works either synchronously or asynchronously depending on whether you want to animate transitions between the views.\n- Makes no assumptions about what your views do or how they're structured except the following:\n    - Views should have an `.el` property that is the root element of the view.\n    - Views should have a `.remove()` method that cleans up and unbinds methods accordingly.\n    - If your view has a `.render()` method it will get called before it's shown.\n    - Beyond this, they could be any object.\n- IT DOES VERY LITTLE ELSE (and *that* is a feature)\n\n## Install\n\n```\nnpm install ampersand-view-switcher\n```\n\n## Example\n\nHere's an example of how you might use the view switcher to handle page views within your ampersand app.\n\n`mainview.js`\n\n```js\nvar AmpersandView = require('ampersand-view');\nvar ViewSwitcher = require('ampersand-view-switcher');\nvar templates = require('./templates');\n\nmodule.exports = AmpersandView.extend({\n    template: templates.body,\n    render: function () {\n        // render our template\n        this.renderAndBind();\n\n        // grab the element without our template based on its \"role\" attribute\n        this.pageContainer = this.getByRole('page-container');\n\n        // set up our page switcher for that element\n        this.pageSwitcher = new ViewSwitcher(this.pageContainer, {\n            // here we provide a few things we'd like to do each time\n            // we switch pages in the app.\n            show: function (newView, oldView) {\n                // set our document title\n                document.title = newView.pageTitle || 'my awesome app';\n                // scroll to the top\n                document.body.scrollTop = 0;\n                // perhaps store a reference to our current page on our\n                // app global for easy access from the browser console.\n                app.currentPage = view;\n            }\n        });\n    } \n});\n```\n\nOr if you wanted to animate them you can do it asynchronously like so:\n\n```js\n// set up our page switcher for that element\nthis.pageSwitcher = new ViewSwitcher(this.pageContainer, {\n    // whether or not to wait for remove to be done before starting show\n    waitForRemove: true,\n    // here we provide a few things to do before the element gets\n    // removed from the DOM.\n    hide: function (oldView, newView, cb) {\n        // it's inserted and rendered for me so we'll add a class \n        // that has a corresponding CSS transition.\n        view.el.classList.add('animateOut');\n        // give it time to finish (yes there are other ways to do this)\n        setTimeout(cb, 1000);\n    },\n    // here we provide a few things we'd like to do each time\n    // we switch pages in the app.\n    show: function (view, oldView) {\n        // it's inserted and rendered for me\n        document.title = newView.pageTitle || 'app name';\n        document.body.scrollTop = 0;\n\n        // store an additional reference, just because\n        app.currentPage = newView;\n\n        view.el.classList.add('animateIn');\n        setTimeout(cb, 2000)\n    }\n});\n```\n\n\n## API Reference\n\n### constructor `new ViewSwitcher(element, [options])`\n\n* `element` {Element} The DOM element that should contain the views.\n* `options` {Object} [optinal]\n    * `show` {Function} [optional] A function that gets called when a view is being shown. It's passed the new view, the previous view (if relevant), and a callback. If you name 3 incoming arguments for example `function (newView, oldView, callback) { ... }` the view switcher will wait for you to call the callback before it's considered ready. If you only use one or two like this: `function (newView, oldView) { ... }` it won't wait for you to call a callback.\n    * `hide` {Function} [optional] A function that gets called when a view is being removed. It's passed the old view, the new view (if relevant), and a callback. If you name 3 incoming arguments for example `function (oldView, newView, callback) { ... }` the view switcher will wait for you to call the callback before it's considered ready. If you only use one or two like this: `function (oldView, newView) { ... }` it won't wait for you to call a callback.\n    * `waitForRemove` {Boolean} [default: `false`] Whether or not to wait until your `hide` animation callback gets called before starting your `show` animation.\n    * `empty` {Function} [optional] A function that gets called any time the view switcher is empty. Including when you instantiate it without giving it a view to start with.\n    * `view` {View} [optional] A view instance to start with.\n\n```javascript\nvar switcher = new ViewSwitcher(document.querySelector('#pageContainer'));\n\nvar view = new MyView({ model: model });\n\nswitcher.set(view);\n```\n\n### set `switcher.set(viewInstance)`\n\n* `viewInstance` {View} The new view to render.\n\nThe instantiated view switcher has this one main method. Simply call it with the new view you wish to show.\n\nThis is most likely going to be an instantiated [ampersand-view](https://github.com/ampersandjs/ampersand-view) or Backbone.View, but can be anything that has a `.el` property that represents that view's root element and `.remove()` method that cleans up after itself. In addition if your custom view object has a `.render()` method it will get called before the view is added to the DOM.\n\n```javascript\nvar switcher = new ViewSwitcher(document.querySelector('#pageContainer'));\n\nvar view = new MyView({ model: model });\n\nswitcher.set(view);\n```\n\n### clear `switcher.clear(callback)`\n\n* `callback` {Function} [optional] An optional callback when removed. Useful if you're doing custom animations.\n\nRemoves the current view from the view switcher. Calls `callback` when done if one was provided.`\n\n```javascript\nvar switcher = new ViewSwitcher(document.querySelector('#pageContainer'));\n\nvar view = new MyView({ model: model });\n\nswitcher.set(view);\n\nswitcher.clear();\n```\n\n## Changelog\n\n- 0.3.0 Adding empty callback, initial view option.\n- 0.0.1 Initial version (prototype stage, beware)\n\n<!-- starthide -->\n\n## Credits\n\nWritten by [@HenrikJoreteg](http://twitter.com/henrikjoreteg) with inspiration and ideas from [@philip_roberts](http://twitter.com/philip_roberts) and [@wraithgar](http://twitter.com/wraithgar) and [other awesome Yetis](http://andyet.com/team).\n\n\n## License\n\nMIT\n\n<!-- endhide -->\n",
  "readmeFilename": "README.md",
  "_id": "ampersand-view-switcher@1.0.2",
  "dist": {
    "shasum": "f3dd3aee1c4cf3205436a6cbe7c5ad366f2e01e9"
  },
  "_from": "ampersand-view-switcher@^1.0.2",
  "_resolved": "https://registry.npmjs.org/ampersand-view-switcher/-/ampersand-view-switcher-1.0.2.tgz"
}
